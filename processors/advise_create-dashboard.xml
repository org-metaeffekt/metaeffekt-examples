<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.metaeffekt.examples.processor</groupId>
        <artifactId>processor-parent</artifactId>
        <version>EXAMPLES-SNAPSHOT</version>
        <relativePath>processor-parent.xml</relativePath>
    </parent>

    <artifactId>advise_create-dashboard</artifactId>
    <packaging>pom</packaging>

    <properties>
        <input.inventory>${project.build.directory}/classes/inventory/</input.inventory>
        <output.dashboard>${project.build.directory}/classes/dashboard/${project.artifactId}-dashboard.html
        </output.dashboard>
        <output.svg>${project.build.directory}/classes/resources/svg</output.svg>

        <activate.dashboard>true</activate.dashboard>
        <ae.dashboard.timeline>true</ae.dashboard.timeline>
        <ae.dashboard.timeline.vulnerabilities.limit>2147483647</ae.dashboard.timeline.vulnerabilities.limit>
    </properties>

    <profiles>
        <profile>
            <id>advise-vulnerability</id>
            <activation> <!-- activate by default, unless disabled via -P-advise-vulnerability -->
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>com.metaeffekt.artifact.analysis</groupId>
                        <artifactId>ae-inventory-enrichment-plugin</artifactId>
                        <version>${ae.artifact.analysis.version}</version>

                        <executions>
                            <execution>
                                <id>inventory-enrichment-advise-vulnerability-execution</id>
                                <goals>
                                    <goal>enrich-inventory</goal>
                                </goals>
                                <configuration>
                                    <inventoryInputFile>${input.inventory}</inventoryInputFile>
                                    <mirrorDirectory>${input.database}</mirrorDirectory>

                                    <vulnerabilityAssessmentDashboardEnrichment>
                                        <active>${activate.dashboard}</active>
                                        <outputDashboardFile>${output.dashboard}</outputDashboardFile>
                                        <svgDirectory>${output.svg}</svgDirectory>

                                        <maximumVulnerabilitiesPerDashboardCount>2147483647
                                        </maximumVulnerabilitiesPerDashboardCount>

                                        <vulnerabilityTimelinesGlobalEnabled>${ae.dashboard.timeline}
                                        </vulnerabilityTimelinesGlobalEnabled>
                                        <maximumCpeForTimelinesPerVulnerability>2147483647
                                        </maximumCpeForTimelinesPerVulnerability>
                                        <maximumVulnerabilitiesPerTimeline>
                                            ${ae.dashboard.timeline.vulnerabilities.limit}
                                        </maximumVulnerabilitiesPerTimeline>
                                        <vulnerabilityTimelineHideIrrelevantVersions>true
                                        </vulnerabilityTimelineHideIrrelevantVersions>
                                        <maximumVersionsPerTimeline>2147483647</maximumVersionsPerTimeline>
                                        <maximumTimeSpentOnTimelines>2147483647</maximumTimeSpentOnTimelines>

                                        <failOnVulnerabilityWithoutSpecifiedRisk>true
                                        </failOnVulnerabilityWithoutSpecifiedRisk>
                                        <failOnUnreviewedAdvisories>true</failOnUnreviewedAdvisories>
                                    </vulnerabilityAssessmentDashboardEnrichment>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
